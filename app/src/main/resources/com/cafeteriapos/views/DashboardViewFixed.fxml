<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.*?>

<ScrollPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.cafeteriapos.controllers.DashboardController" styleClass="dashboard-scroll" fitToWidth="true">
   <content>
      <VBox styleClass="dashboard-container" spacing="30.0">
         <padding>
            <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
         </padding>
         
         <!-- Título Principal -->
         <VBox styleClass="title-section" spacing="5.0">
            <Label text="Dashboard Analytics" styleClass="main-title" />
            <Label text="Monitoreo en tiempo real de tu negocio" styleClass="subtitle" />
            <Label fx:id="lblUltimaActualizacion" text="Ultima actualizacion: --:--" styleClass="ultima-actualizacion" />
         </VBox>
         
         <!-- Grid de Tarjetas de Métricas -->
         <GridPane styleClass="metrics-grid" hgap="25.0" vgap="25.0">
            <columnConstraints>
               <ColumnConstraints hgrow="SOMETIMES" minWidth="380.0" prefWidth="400.0" />
               <ColumnConstraints hgrow="SOMETIMES" minWidth="380.0" prefWidth="400.0" />
               <ColumnConstraints hgrow="SOMETIMES" minWidth="380.0" prefWidth="400.0" />
            </columnConstraints>
            
            <!-- Tarjeta Balance Mensual -->
            <StackPane styleClass="metric-card-modern balance-card" GridPane.columnIndex="0" GridPane.rowIndex="0">
               <VBox styleClass="card-layout-modern" spacing="20.0" fillWidth="true">
                  <padding>
                     <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
                  </padding>
                  
                  <!-- Header moderno de la tarjeta -->
                  <HBox styleClass="card-header-modern" spacing="15.0" alignment="CENTER_LEFT">
                     <StackPane styleClass="icon-container-balance" minWidth="45.0" minHeight="45.0" maxWidth="45.0" maxHeight="45.0">
                        <Circle styleClass="icon-background-balance" radius="22.5" />
                        <Label text="[CHART]" styleClass="card-icon-large" />
                     </StackPane>
                     <VBox styleClass="header-text-modern" spacing="3.0">
                        <Label text="Balance Mensual" styleClass="card-title-modern" />
                        <Label text="Actualizado en tiempo real" styleClass="card-subtitle-modern" />
                     </VBox>
                  </HBox>
                  
                  <!-- Estadísticas principales con diseño moderno -->
                  <VBox styleClass="stats-container-modern" spacing="15.0">
                     <HBox styleClass="stat-row-modern" spacing="20.0" alignment="CENTER">
                        <VBox styleClass="stat-item-modern" spacing="5.0">
                           <Label text="$ Ingresos" styleClass="stat-label-modern" />
                           <Label fx:id="lblIngresosHoy" text="$0.00" styleClass="stat-value-modern stat-positive" />
                        </VBox>
                        <Rectangle styleClass="stat-divider-modern" width="2.0" height="40.0" />
                        <VBox styleClass="stat-item-modern" spacing="5.0">
                           <Label text="$ Gastos" styleClass="stat-label-modern" />
                           <Label fx:id="lblCostosHoy" text="$0.00" styleClass="stat-value-modern stat-neutral" />
                        </VBox>
                     </HBox>
                     
                     <!-- Información adicional modernizada -->
                     <VBox styleClass="balance-summary-modern" spacing="8.0">
                        <HBox styleClass="status-row" spacing="8.0" alignment="CENTER_LEFT">
                           <Label text="[UP]" styleClass="status-icon" />
                           <Label text="Balance positivo del mes" styleClass="balance-status-modern" />
                        </HBox>
                        <HBox styleClass="trend-row" spacing="8.0" alignment="CENTER_LEFT">
                           <Label text="[CHART]" styleClass="trend-icon" />
                           <Label text="Crecimiento sostenido" styleClass="balance-trend-modern" />
                        </HBox>
                     </VBox>
                  </VBox>
                  
                  <!-- Botón de acción modernizado -->
                  <Button onAction="#verReporteCompleto" text="Ver Reporte Completo" styleClass="card-action-button-modern primary-button" />
               </VBox>
            </StackPane>
            
            <!-- Tarjeta Ventas del Día -->
            <StackPane styleClass="metric-card-modern sales-card" GridPane.columnIndex="1" GridPane.rowIndex="0">
               <VBox styleClass="card-layout-modern" spacing="20.0" fillWidth="true">
                  <padding>
                     <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
                  </padding>
                  
                  <!-- Header moderno de ventas -->
                  <HBox styleClass="card-header-modern" spacing="15.0" alignment="CENTER_LEFT">
                     <StackPane styleClass="icon-container-sales" minWidth="45.0" minHeight="45.0" maxWidth="45.0" maxHeight="45.0">
                        <Circle styleClass="icon-background-sales" radius="22.5" />
                        <Label text="[$]" styleClass="card-icon-large" />
                     </StackPane>
                     <VBox styleClass="header-text-modern" spacing="3.0">
                        <Label text="Ventas de Hoy" styleClass="card-title-modern" />
                        <Label text="Tiempo real" styleClass="card-subtitle-modern sales-subtitle" />
                     </VBox>
                  </HBox>
                  
                  <!-- Métrica principal grande -->
                  <VBox styleClass="main-metric-container" spacing="12.0" alignment="CENTER">
                     <Label fx:id="lblVentasHoy" text="$0.00" styleClass="main-stat-value-huge" />
                     <HBox styleClass="sub-metrics-row" spacing="15.0" alignment="CENTER">
                        <VBox styleClass="sub-metric" spacing="3.0" alignment="CENTER">
                           <Label text="[CART]" styleClass="sub-metric-icon" />
                           <Label fx:id="lblTransaccionesHoy" text="0" styleClass="sub-metric-value" />
                           <Label text="transacciones" styleClass="sub-metric-label" />
                        </VBox>
                        <Rectangle styleClass="sub-metric-divider" width="2.0" height="30.0" />
                        <VBox styleClass="sub-metric" spacing="3.0" alignment="CENTER">
                           <Label text="[BAR]" styleClass="sub-metric-icon" />
                           <Label fx:id="lblPromedioVenta" text="$0" styleClass="sub-metric-value" />
                           <Label text="promedio" styleClass="sub-metric-label" />
                        </VBox>
                     </HBox>
                  </VBox>
                  
                  <!-- Botón de acción modernizado -->
                  <Button onAction="#verDetalleVentas" text="Ver Detalle de Ventas" styleClass="card-action-button-modern success-button" />
               </VBox>
            </StackPane>            <!-- Tarjeta Producto Estrella -->
            <StackPane styleClass="metric-card-modern product-card" GridPane.columnIndex="2" GridPane.rowIndex="0">
               <VBox styleClass="card-layout-modern" spacing="20.0" fillWidth="true">
                  <padding>
                     <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
                  </padding>
                  
                  <!-- Header moderno de productos -->
                  <HBox styleClass="card-header-modern" spacing="15.0" alignment="CENTER_LEFT">
                     <StackPane styleClass="icon-container-product" minWidth="45.0" minHeight="45.0" maxWidth="45.0" maxHeight="45.0">
                        <Circle styleClass="icon-background-product" radius="22.5" />
                        <Label text="[STAR]" styleClass="card-icon-large" />
                     </StackPane>
                     <VBox styleClass="header-text-modern" spacing="3.0">
                        <Label text="Producto Estrella" styleClass="card-title-modern" />
                        <Label text="Más vendido" styleClass="card-subtitle-modern product-subtitle" />
                     </VBox>
                  </HBox>
                  
                  <!-- Información del producto destacado -->
                  <VBox styleClass="product-showcase" spacing="15.0" alignment="CENTER">
                     <VBox styleClass="product-name-container" spacing="5.0" alignment="CENTER">
                        <Label text="[TROPHY]" styleClass="trophy-icon" />
                        <Label fx:id="lblProductoTop" text="Ninguno" styleClass="product-name-modern" />
                     </VBox>
                     
                     <HBox styleClass="product-stats-modern" spacing="20.0" alignment="CENTER">
                        <VBox styleClass="product-stat-item" spacing="5.0" alignment="CENTER">
                           <Label text="[BOX]" styleClass="product-stat-icon" />
                           <Label fx:id="lblCantidadTop" text="0" styleClass="product-stat-value" />
                           <Label text="vendidos" styleClass="product-stat-label" />
                        </VBox>
                        <Rectangle styleClass="product-stat-divider" width="2.0" height="35.0" />
                        <VBox styleClass="product-stat-item" spacing="5.0" alignment="CENTER">
                           <Label text="[$]" styleClass="product-stat-icon" />
                           <Label fx:id="lblIngresosTop" text="$0" styleClass="product-stat-value" />
                           <Label text="ingresos" styleClass="product-stat-label" />
                        </VBox>
                     </HBox>
                  </VBox>
                  
                  <!-- Botón de acción modernizado -->
                  <Button onAction="#gestionarProductos" text="Gestionar Productos" styleClass="card-action-button-modern info-button" />
               </VBox>
            </StackPane>
         </GridPane>
         
         <!-- Sección de Análisis Visual Modernizada -->
         <VBox styleClass="visual-analysis-section-modern" spacing="30.0">
            <padding>
               <Insets bottom="40.0" left="0.0" right="0.0" top="30.0" />
            </padding>
            
            <!-- Header de la sección con icono -->
            <HBox styleClass="section-header-modern" spacing="15.0" alignment="CENTER_LEFT">
               <StackPane styleClass="section-icon-container" minWidth="50.0" minHeight="50.0" maxWidth="50.0" maxHeight="50.0">
                  <Circle styleClass="section-icon-background" radius="25.0" />
                  <Label text="[CHART]" styleClass="section-icon-large" />
               </StackPane>
               <VBox styleClass="section-title-container" spacing="5.0">
                  <Label text="Análisis Visual" styleClass="section-title-modern" />
                  <Label text="Gráficos y tendencias en tiempo real" styleClass="section-subtitle-modern" />
               </VBox>
            </HBox>
            
            <!-- Container de gráficos modernizado -->
            <HBox styleClass="charts-container-modern" spacing="35.0" alignment="CENTER">
               <!-- Gráfico de Ventas Diarias -->
               <StackPane styleClass="chart-card-modern" prefWidth="500.0">
                  <VBox styleClass="chart-container-modern" spacing="20.0" fillWidth="true">
                     <padding>
                        <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
                     </padding>
                     
                     <!-- Header del gráfico -->
                     <HBox styleClass="chart-header-modern" spacing="12.0" alignment="CENTER_LEFT">
                        <StackPane styleClass="chart-icon-container-bar" minWidth="40.0" minHeight="40.0" maxWidth="40.0" maxHeight="40.0">
                           <Circle styleClass="chart-icon-background-bar" radius="20.0" />
                           <Label text="[UP]" styleClass="chart-icon-modern" />
                        </StackPane>
                        <VBox spacing="3.0">
                           <Label text="Ventas por Día" styleClass="chart-title-modern" />
                           <Label text="Últimos 7 días" styleClass="chart-subtitle-modern" />
                        </VBox>
                     </HBox>
                     
                     <!-- Gráfico -->
                     <StackPane styleClass="chart-wrapper-modern" prefHeight="400.0">
                        <BarChart fx:id="chartVentasDiarias" styleClass="modern-bar-chart" animated="true" minHeight="350.0" prefHeight="400.0" legendVisible="false">
                           <xAxis>
                              <CategoryAxis fx:id="xAxisDias" styleClass="chart-axis-modern" />
                           </xAxis>
                           <yAxis>
                              <NumberAxis fx:id="yAxisVentas" styleClass="chart-axis-modern" />
                           </yAxis>
                        </BarChart>
                     </StackPane>
                  </VBox>
               </StackPane>
               
               <!-- Gráfico de Productos Top -->
               <StackPane styleClass="chart-card-modern" prefWidth="500.0">
                  <VBox styleClass="chart-container-modern" spacing="20.0" fillWidth="true">
                     <padding>
                        <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
                     </padding>
                     
                     <!-- Header del gráfico -->
                     <HBox styleClass="chart-header-modern" spacing="12.0" alignment="CENTER_LEFT">
                        <StackPane styleClass="chart-icon-container-pie" minWidth="40.0" minHeight="40.0" maxWidth="40.0" maxHeight="40.0">
                           <Circle styleClass="chart-icon-background-pie" radius="20.0" />
                           <Label text="[MEDAL]" styleClass="chart-icon-modern" />
                        </StackPane>
                        <VBox spacing="3.0">
                           <Label text="Top Productos" styleClass="chart-title-modern" />
                           <Label text="Más vendidos" styleClass="chart-subtitle-modern" />
                        </VBox>
                     </HBox>
                     
                     <!-- Gráfico -->
                     <StackPane styleClass="chart-wrapper-modern" prefHeight="400.0">
                        <PieChart fx:id="chartProductosTop" styleClass="modern-pie-chart" animated="true" minHeight="350.0" prefHeight="400.0" legendVisible="true" />
                     </StackPane>
                  </VBox>
               </StackPane>
            </HBox>
         </VBox>
         
         <!-- Sección de Acciones Modernizada -->
         <HBox styleClass="action-section-modern" spacing="20.0" alignment="CENTER">
            <padding>
               <Insets bottom="25.0" left="0.0" right="0.0" top="25.0" />
            </padding>
            
            <!-- Botón Actualizar -->
            <Button fx:id="btnActualizar" onAction="#actualizarDatos" text="Actualizar Datos" styleClass="action-button-modern refresh-button-modern" minWidth="180.0" />
            
            <!-- Botón Exportar -->
            <Button onAction="#exportarReporte" text="Exportar Reporte" styleClass="action-button-modern export-button-modern" minWidth="180.0" />
            
            <!-- Botón Configurar -->
            <Button onAction="#configurarDashboard" text="Configurar Dashboard" styleClass="action-button-modern config-button-modern" minWidth="200.0" />
            
            <!-- Botón Limpiar (peligroso) -->
            <Button onAction="#limpiarBaseDatos" text="Limpiar BD" styleClass="action-button-modern danger-button-modern" minWidth="150.0" />
         </HBox>
      </VBox>
   </content>
</ScrollPane>
