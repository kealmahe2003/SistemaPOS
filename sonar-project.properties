# Configuración SonarQube para proyecto multi-módulo
# Identificación del proyecto (obligatorio)
sonar.projectKey=kealmahe2003_SistemaPOS
sonar.organization=kealmahe2003

# URL de SonarCloud (IMPORTANTE: no usar localhost)
sonar.host.url=https://sonarcloud.io

# Metadatos
sonar.projectName=Sistema POS Cafetería
sonar.projectVersion=1.0

# Configuración de lenguajes y encoding
sonar.language=java
sonar.sourceEncoding=UTF-8
sonar.java.source=21
sonar.java.target=21

# Configuración para proyecto multi-módulo Gradle
# Apuntar a las ubicaciones correctas dentro del módulo app
sonar.sources=app/src/main/java
sonar.tests=app/src/test/java
sonar.java.binaries=app/build/classes/java/main
sonar.java.test.binaries=app/build/classes/java/test

# Configuración de coverage y reports
sonar.java.coveragePlugin=jacoco
sonar.coverage.jacoco.xmlReportPaths=app/build/reports/jacoco/test/jacocoTestReport.xml
sonar.junit.reportPaths=app/build/test-results/test

# Inclusiones específicas de tests
sonar.test.inclusions=**/*Test.java,**/*Tests.java,**/*TestCompleto.java

# Exclusiones de cobertura para archivos que no la necesitan
# Enfocamos la cobertura en clases de negocio críticas
sonar.coverage.exclusions=\
    **/Main.java,\
    **/*Application.java,\
    **/*Controller.java,\
    **/controllers/**,\
    **/performance/**,\
    **/cache/**,\
    **/views/**,\
    **/*.fxml,\
    **/*.css,\
    **/test/**,\
    **/tests/**

# Excluir archivos generados, recursos y otros módulos
sonar.exclusions=\
    **/build/**,\
    **/*.properties,\
    **/*.fxml,\
    **/*.css,\
    list/**,\
    utilities/**,\
    buildSrc/**,\
    gradle/**

# Configuración adicional para mejorar detección
sonar.scm.disabled=true
sonar.gradle.skipCompile=true

# Configuración de calidad - enfocarse en nuevo código
sonar.newCode.referenceBranch=main

# Excluir duplicados en clases de prueba
sonar.cpd.exclusions=**/*Test.java,**/*Tests.java

# ===============================================
# CONFIGURACIÓN OPTIMIZADA PARA SONARCLOUD
# ===============================================

# Configuración de quality gate personalizada
# Enfocamos en métricas que importan para este proyecto
sonar.qualitygate.wait=true

# Configuraciones específicas para JavaFX y aplicaciones de escritorio
sonar.java.libraries=app/build/libs/**/*.jar

# Configuración de análisis específico para nuevo código
# Reducir threshold para coverage en nuevo código
sonar.coverage.threshold=40

# Configuración de issues
# Priorizar issues de seguridad y reliability
sonar.issue.ignore.multicriteria=e1,e2,e3

# Ignorar algunos warnings menores en clases de test
sonar.issue.ignore.multicriteria.e1.ruleKey=java:S2699
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*Test.java

# Ignorar warnings de assertions en tests
sonar.issue.ignore.multicriteria.e2.ruleKey=java:S5960
sonar.issue.ignore.multicriteria.e2.resourceKey=**/*Test.java

# Ignorar magic numbers en tests (son valores de prueba)
sonar.issue.ignore.multicriteria.e3.ruleKey=java:S109
sonar.issue.ignore.multicriteria.e3.resourceKey=**/*Test.java

# Configuración de análisis de seguridad
sonar.security.hotspots.disable=false

# Configuración de análisis de código
sonar.java.enablePreview=false
